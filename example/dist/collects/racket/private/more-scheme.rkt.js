import * as $rjs_core from '../../../runtime/core.js';import * as M0 from "../../../runtime/kernel.rkt.js";import * as M1 from "../../../runtime/paramz.rkt.js";var current_parameterization = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M0.continuation_mark_set_first(false,M1.parameterization_key);};var call_with_parameterization = function(paramz2779, thunk2780) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.__rjs_quoted__.parameterization_p(paramz2779)!==false) {var if_res1817 = M0.rvoid();} else {var if_res1817 = M0.raise_argument_error($rjs_core.PrimitiveSymbol.make("call-with-parameterization"),$rjs_core.UString.make("parameterization?"),0,paramz2779,thunk2780);}if_res1817;if (M0.procedure_p(thunk2780)!==false) {var if_res1818 = M0.procedure_arity_includes_p(thunk2780,0);} else {var if_res1818 = false;}if (if_res1818!==false) {var if_res1819 = M0.rvoid();} else {var if_res1819 = M0.raise_argument_error($rjs_core.PrimitiveSymbol.make("call-with-parameterization"),$rjs_core.UString.make("(-> any)"),1,paramz2779,thunk2780);}if_res1819;var __context1820 = $rjs_core.Marks.getFrames();var __context1821;try {__context1821 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M1.parameterization_key,paramz2779);var __wcm_result1822 = thunk2780();} finally {$rjs_core.Marks.updateFrame(__context1820,__context1821);}return __wcm_result1822;};var let_result1824 = M0.make_struct_type($rjs_core.PrimitiveSymbol.make("break-parameterization"),false,1,0,false);var struct_break_paramz = let_result1824.getAt(0);var make_break_paramz = let_result1824.getAt(1);var break_paramz_p = let_result1824.getAt(2);var break_paramz_ref = let_result1824.getAt(3);var break_paramz_set_bang_ = let_result1824.getAt(4);var let_result1825 = M0.make_struct_type($rjs_core.PrimitiveSymbol.make("break-parameterization"),false,1,0,false,M0.rnull,M0.current_inspector());var type2781 = let_result1825.getAt(0);var maker2782 = let_result1825.getAt(1);var pred2783 = let_result1825.getAt(2);var access2784 = let_result1825.getAt(3);var mutate2785 = let_result1825.getAt(4);var let_result1826 = M0.values(type2781,maker2782,pred2783,M0.make_struct_field_accessor(access2784,0,$rjs_core.PrimitiveSymbol.make("cell")),M0.make_struct_field_mutator(mutate2785,0,$rjs_core.PrimitiveSymbol.make("cell")));var struct_break_parameterization = let_result1826.getAt(0);var make_break_parameterization = let_result1826.getAt(1);var break_parameterization_p = let_result1826.getAt(2);var break_parameterization_cell = let_result1826.getAt(3);var set_break_parameterization_cell_bang_ = let_result1826.getAt(4);var current_break_parameterization = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return make_break_paramz(M0.continuation_mark_set_first(false,M1.break_enabled_key));};var call_with_break_parameterization = function(paramz2786, thunk2787) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (break_paramz_p(paramz2786)!==false) {var if_res1827 = M0.rvoid();} else {var if_res1827 = M0.raise_argument_error($rjs_core.PrimitiveSymbol.make("call-with-break-parameterization"),$rjs_core.UString.make("break-parameterization?"),0,paramz2786,thunk2787);}if_res1827;if (M0.procedure_p(thunk2787)!==false) {var if_res1828 = M0.procedure_arity_includes_p(thunk2787,0);} else {var if_res1828 = false;}if (if_res1828!==false) {var if_res1829 = M0.rvoid();} else {var if_res1829 = M0.raise_argument_error($rjs_core.PrimitiveSymbol.make("call-with-parameterization"),$rjs_core.UString.make("(-> any)"),1,paramz2786,thunk2787);}if_res1829;var __context1831 = $rjs_core.Marks.getFrames();var __context1832;try {__context1832 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M1.break_enabled_key,break_paramz_ref(paramz2786,0));M1.check_for_break();var __wcm_result1833 = thunk2787();} finally {$rjs_core.Marks.updateFrame(__context1831,__context1832);}var begin_res1830 = __wcm_result1833;M1.check_for_break();return begin_res1830;};var select_handler_by_no_breaks = function(e2788, bpz2789, l2790) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var __context1842 = $rjs_core.Marks.getFrames();var __context1843;try {__context1843 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M1.break_enabled_key,M0.make_thread_cell(false));var loop2791 = function(l2792) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.null_p(l2792)!==false) {var if_res1841 = M0.raise(e2788);} else {if (M0.caar(l2792)(e2788)!==false) {var begin_res1835 = M0.cdar(l2792)(e2788);var __context1836 = $rjs_core.Marks.getFrames();var __context1837;try {__context1837 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M1.break_enabled_key,bpz2789);var __wcm_result1838 = M1.check_for_break();} finally {$rjs_core.Marks.updateFrame(__context1836,__context1837);}__wcm_result1838;var if_res1840 = begin_res1835;} else {var if_res1840 = loop2791(M0.cdr(l2792));}var if_res1841 = if_res1840;}return if_res1841;};var __wcm_result1844 = loop2791(l2790);} finally {$rjs_core.Marks.updateFrame(__context1842,__context1843);}return __wcm_result1844;};var select_handler_by_breaks_as_is = function(e2793, bpz2794, l2795) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.null_p(l2795)!==false) {var if_res1851 = M0.raise(e2793);} else {if (M0.caar(l2795)(e2793)!==false) {var __context1846 = $rjs_core.Marks.getFrames();var __context1847;try {__context1847 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M1.break_enabled_key,bpz2794);M1.check_for_break();var __wcm_result1848 = M0.cdar(l2795)(e2793);} finally {$rjs_core.Marks.updateFrame(__context1846,__context1847);}var if_res1850 = __wcm_result1848;} else {var if_res1850 = select_handler_by_breaks_as_is(e2793,bpz2794,M0.cdr(l2795));}var if_res1851 = if_res1850;}return if_res1851;};var false_thread_cell = M0.make_thread_cell(false);var check_with_handlers_in_context = function(handler_prompt_key2796) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.__rjs_quoted__.continuation_prompt_available_p(handler_prompt_key2796)!==false) {var if_res1852 = M0.rvoid();} else {var if_res1852 = M0.error($rjs_core.PrimitiveSymbol.make("with-handlers"),$rjs_core.UString.make("exception handler used out of context"));}return if_res1852;};var handler_prompt_key = M0.make_continuation_prompt_tag($rjs_core.PrimitiveSymbol.make("handler-prompt-tag"));var call_handled_body = function(bpz2797, handle_proc2798, body_thunk2799) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var __context1861 = $rjs_core.Marks.getFrames();var __context1862;try {__context1862 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M1.break_enabled_key,false_thread_cell);var __wcm_result1863 = M0.call_with_continuation_prompt(function(bpz2800, body_thunk2801) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var __context1857 = $rjs_core.Marks.getFrames();var __context1858;try {__context1858 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M1.break_enabled_key,bpz2800);var __context1853 = $rjs_core.Marks.getFrames();var __context1854;try {__context1854 = __context1853;$rjs_core.Marks.setMark(M1.exception_handler_key,function(e2802) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M0.abort_current_continuation(handler_prompt_key,e2802);});var __wcm_result1855 = body_thunk2801();} finally {$rjs_core.Marks.updateFrame(__context1853,__context1854);}var __wcm_result1859 = __wcm_result1855;} finally {$rjs_core.Marks.updateFrame(__context1857,__context1858);}return __wcm_result1859;},handler_prompt_key,handle_proc2798,bpz2797,body_thunk2799);} finally {$rjs_core.Marks.updateFrame(__context1861,__context1862);}return __wcm_result1863;};var call_with_exception_handler = function(exnh2803, thunk2804) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var __context1866 = $rjs_core.Marks.getFrames();var __context1867;try {__context1867 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M1.exception_handler_key,exnh2803);var __wcm_result1868 = thunk2804();} finally {$rjs_core.Marks.updateFrame(__context1866,__context1867);}var begin_res1865 = __wcm_result1868;M0.rvoid();return begin_res1865;};var call_by_cc = M0.__rjs_quoted__.call_with_current_continuation;var not_there = M0.gensym();var do_hash_update = function(who2805, mut_p2806, set2807, ht2808, key2809, xform2810, default2811) {if (arguments.length!==7) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.variable_reference_from_unsafe_p($rjs_core.PrimitiveSymbol.make("#%variable-reference"))!==false) {var if_res1876 = M0.rvoid();} else {if (M0.hash_p(ht2808)!==false) {if (mut_p2806!==false) {var if_res1870 = M0.not(M0.immutable_p(ht2808));} else {var if_res1870 = M0.immutable_p(ht2808);}var if_res1871 = if_res1870;} else {var if_res1871 = false;}if (if_res1871!==false) {var if_res1873 = M0.rvoid();} else {if (mut_p2806!==false) {var if_res1872 = $rjs_core.UString.make("(and/c hash? (not/c immutable?))");} else {var if_res1872 = $rjs_core.UString.make("(and/c hash? immutable?)");}var if_res1873 = M0.raise_argument_error(who2805,if_res1872,ht2808);}if_res1873;if (M0.procedure_p(xform2810)!==false) {var if_res1874 = M0.procedure_arity_includes_p(xform2810,1);} else {var if_res1874 = false;}if (if_res1874!==false) {var if_res1875 = M0.rvoid();} else {var if_res1875 = M0.raise_argument_error(who2805,$rjs_core.UString.make("(any/c . -> . any/c)"),xform2810);}var if_res1876 = if_res1875;}if_res1876;var v2812 = M0.hash_ref(ht2808,key2809,default2811);if (M0.eq_p(v2812,not_there)!==false) {var if_res1877 = M0.raise_mismatch_error(who2805,$rjs_core.UString.make("no value found for key: "),key2809);} else {var if_res1877 = set2807(ht2808,key2809,xform2810(v2812));}return if_res1877;};var cl1878 = function(ht2813, key2814, xform2815, default2816) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}return do_hash_update($rjs_core.PrimitiveSymbol.make("hash-update"),false,M0.hash_set,ht2813,key2814,xform2815,default2816);};var cl1879 = function(ht2817, key2818, xform2819) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}return hash_update(ht2817,key2818,xform2819,not_there);};var hash_update = $rjs_core.attachProcedureArity(function() {var fixed_lam1880 = {'4':cl1878,'3':cl1879}[arguments.length];if (fixed_lam1880!==undefined) {return fixed_lam1880.apply(null,arguments);} else {return M0.error($rjs_core.UString.make("case-lambda: invalid case"));}},[3,4]);var cl1881 = function(ht2820, key2821, xform2822, default2823) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}return do_hash_update($rjs_core.PrimitiveSymbol.make("hash-update!"),true,M0.hash_set_bang_,ht2820,key2821,xform2822,default2823);};var cl1882 = function(ht2824, key2825, xform2826) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}return hash_update_bang_(ht2824,key2825,xform2826,not_there);};var hash_update_bang_ = $rjs_core.attachProcedureArity(function() {var fixed_lam1883 = {'4':cl1881,'3':cl1882}[arguments.length];if (fixed_lam1883!==undefined) {return fixed_lam1883.apply(null,arguments);} else {return M0.error($rjs_core.UString.make("case-lambda: invalid case"));}},[3,4]);var hash_has_key_p = function(ht2827, key2828) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.hash_p(ht2827)!==false) {var if_res1884 = M0.rvoid();} else {var if_res1884 = M0.raise_argument_error($rjs_core.PrimitiveSymbol.make("hash-has-key?"),$rjs_core.UString.make("hash?"),0,ht2827,key2828);}if_res1884;return M0.not(M0.eq_p(not_there,M0.hash_ref(ht2827,key2828,not_there)));};var hash_ref_bang_ = function(ht2829, key2830, new2831) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.hash_p(ht2829)!==false) {var if_res1885 = M0.not(M0.immutable_p(ht2829));} else {var if_res1885 = false;}if (if_res1885!==false) {var if_res1886 = M0.rvoid();} else {var if_res1886 = M0.raise_argument_error($rjs_core.PrimitiveSymbol.make("hash-ref!"),$rjs_core.UString.make("(and/c hash? (not/c immutable?))"),0,ht2829,key2830,new2831);}if_res1886;var v2832 = M0.hash_ref(ht2829,key2830,not_there);if (M0.eq_p(not_there,v2832)!==false) {if (M0.procedure_p(new2831)!==false) {var if_res1887 = new2831();} else {var if_res1887 = new2831;}var n2833 = if_res1887;M0.hash_set_bang_(ht2829,key2830,n2833);var if_res1888 = n2833;} else {var if_res1888 = v2832;}return if_res1888;};var __rjs_quoted__ = {};__rjs_quoted__.call_by_cc = call_by_cc;__rjs_quoted__.select_handler_by_no_breaks = select_handler_by_no_breaks;__rjs_quoted__.call_handled_body = call_handled_body;__rjs_quoted__.select_handler_by_breaks_as_is = select_handler_by_breaks_as_is;export { __rjs_quoted__,hash_update_bang_,hash_update,hash_has_key_p,hash_ref_bang_,call_by_cc,call_with_exception_handler,break_paramz_p as break_parameterization_p,call_with_break_parameterization,current_break_parameterization,call_with_parameterization,current_parameterization };