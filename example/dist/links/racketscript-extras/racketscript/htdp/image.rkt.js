import * as $rjs_core from '../../../../runtime/core.js';import * as M0 from "../../../../runtime/kernel.rkt.js";import * as M1 from "./private/color.rkt.js";import * as M2 from "../../../../collects/racket/private/map.rkt.js";import * as M3 from "../../../racketscript-compiler/racketscript/interop.rkt.js";import * as M4 from "../../../racketscript-compiler/racketscript/private/interop.rkt.js";import * as M5 from "../../../../collects/racket/private/list.rkt.js";import * as M6 from "../private/jscommon.rkt.js";var let_result571 = M0.make_struct_type($rjs_core.PrimitiveSymbol.make("posn"),false,2,0,false,M0.rnull,false,false,$rjs_core.Pair.makeList(0,1),false,$rjs_core.PrimitiveSymbol.make("posn"));var struct_869 = let_result571.getAt(0);var make_870 = let_result571.getAt(1);var __p871 = let_result571.getAt(2);var __ref872 = let_result571.getAt(3);var __set_bang_873 = let_result571.getAt(4);var let_result572 = M0.values(struct_869,make_870,__p871,M0.make_struct_field_accessor(__ref872,0,$rjs_core.PrimitiveSymbol.make("x")),M0.make_struct_field_accessor(__ref872,1,$rjs_core.PrimitiveSymbol.make("y")));var struct_posn = let_result572.getAt(0);var make_posn = let_result572.getAt(1);var posn_p = let_result572.getAt(2);var posn_x = let_result572.getAt(3);var posn_y = let_result572.getAt(4);var ___gt_web_color = function(p874) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.string_p(p874)!==false) {var if_res575 = M1.string__gt_web_color(p874);} else {if (M1.color_p(p874)!==false) {var if_res574 = M1.color__gt_web_color(p874);} else {if (M0.symbol_p(p874)!==false) {var if_res573 = M1.string__gt_web_color(M0.symbol__gt_string(p874));} else {var if_res573 = M0.error($rjs_core.PrimitiveSymbol.make("color"),$rjs_core.UString.make("invalid color"));}var if_res574 = if_res573;}var if_res575 = if_res574;}return if_res575;};var print_image = function(d875) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var canvas876 = M6.document.createElement("canvas");var ctx877 = canvas876.getContext("2d");M6.document.body.appendChild(canvas876);M6.document.body.appendChild(M6.document.createElement("br"));canvas876.width = d875.width;canvas876.height = d875.height;ctx877.save();ctx877.translate(d875.width/2,d875.height/2);d875.render(ctx877,0,0);return ctx877.restore();};var canvas878 = M6.document.createElement("canvas");var __times_invisible_canvas_context_times_ = canvas878.getContext("2d");var empty_image = {'type':$rjs_core.UString.make("empty-image"),'width':0,'height':0,'render':function(ctx879, x880, y881) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M0.rvoid();}};var image_height = function(i882) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return i882.height;};var image_width = function(i883) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return i883.width;};var Text = function(text884, size885, color886, face887, family888, style889, weight890, underline_p891) {if (arguments.length!==8) {throw $rjs_core.racketContractError("arity mismatch");} else {}var this892 = this;this892.type = $rjs_core.UString.make("text");this892.text = text884;this892.size = size885;this892.color = ___gt_web_color(color886);this892.face = face887;this892.family = family888;this892.style = style889;this892.weight = weight890;this892.underline = underline_p891;return this892._updateMetrics();};Text.prototype._updateMetrics = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}var this893 = this;var font894 = M0.string_append(this893.weight,$rjs_core.UString.make(" "),this893.style,$rjs_core.UString.make(" "),M0.number__gt_string(this893.size),$rjs_core.UString.make("px "),this893.face,$rjs_core.UString.make(" "),this893.family);__times_invisible_canvas_context_times_.font = M3.js_string(font894);var let_result576 = M0.values();var metrics895 = __times_invisible_canvas_context_times_.measureText(M3.js_string(this893.text));this893.font = font894;this893.width = metrics895.width;this893.height = this893.size;return null;};Text.prototype.render = function(ctx896, x897, y898) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var this899 = this;ctx896.save();ctx896.translate(x897,y898);ctx896.font = M3.js_string(this899.font);ctx896.textAlign = "center";ctx896.textBaseline = "middle";ctx896.fillStyle = M3.js_string(this899.color);ctx896.fillText(M3.js_string(this899.text),0,0);return ctx896.restore();};var Line = function(x900, y901, pen_or_color902) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var this903 = this;this903.type = $rjs_core.UString.make("line");this903.width = M6.abs_plus_ceil(x900);this903.height = M6.abs_plus_ceil(y901);this903.mode = false;this903.pen = pen_or_color902;return null;};Line.prototype.render = function(ctx904, x905, y906) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var this907 = this;ctx904.save();var let_result577 = M0.values();ctx904.translate(x905,y906);var let_result578 = M0.values();ctx904.beginPath();var let_result579 = M0.values();var sx908 = M0.__(M0.abs(this907.x/2));var sy909 = M0.__(M0.abs(this907.y/2));if (M0.__gt__eq_(x905,0)!==false) {var if_res580 = M0.__gt__eq_(y906,0);} else {var if_res580 = false;}if (if_res580!==false) {ctx904.moveTo(sx908,sy909);var if_res587 = ctx904.lineTo(sx908+x905,sy909+y906);} else {if (M0.__gt__eq_(x905,0)!==false) {var if_res581 = M0.__lt_(y906,0);} else {var if_res581 = false;}if (if_res581!==false) {ctx904.moveTo(sx908+x905,sy909);var if_res586 = ctx904.lineTo(sx908,sy909-y906);} else {if (M0.__lt_(x905,0)!==false) {var if_res582 = M0.__gt__eq_(y906,0);} else {var if_res582 = false;}if (if_res582!==false) {ctx904.moveTo(sx908,sy909+y906);var if_res585 = ctx904.lineTo(sx908-x905,sy909);} else {if (M0.__lt_(x905,0)!==false) {var if_res583 = M0.__lt_(y906,0);} else {var if_res583 = false;}if (if_res583!==false) {ctx904.moveTo(sx908-x905,sy909-y906);var if_res584 = ctx904.lineTo(sx908,sy909);} else {var if_res584 = M0.rvoid();}var if_res585 = if_res584;}var if_res586 = if_res585;}var if_res587 = if_res586;}if_res587;var or_part910 = M0.equal_p($rjs_core.UString.make("outline"),$rjs_core.PrimitiveSymbol.make("outline"));if (or_part910!==false) {var if_res588 = or_part910;} else {var if_res588 = M0.equal_p($rjs_core.UString.make("outline"),$rjs_core.UString.make("outline"));}if (if_res588!==false) {ctx904.strokeStyle = M3.js_string(___gt_web_color(this907.pen));var if_res591 = ctx904.stroke();} else {var or_part911 = M0.equal_p($rjs_core.UString.make("outline"),$rjs_core.PrimitiveSymbol.make("solid"));if (or_part911!==false) {var if_res589 = or_part911;} else {var if_res589 = M0.equal_p($rjs_core.UString.make("outline"),$rjs_core.UString.make("solid"));}if (if_res589!==false) {ctx904.fillStyle = M3.js_string(___gt_web_color(this907.pen));var if_res590 = ctx904.fill();} else {var if_res590 = M0.rvoid();}var if_res591 = if_res590;}if_res591;ctx904.closePath();return ctx904.restore();};var Rectangle = function(width912, height913, mode914, pen_or_color915) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}var this916 = this;this916.type = $rjs_core.UString.make("rectangle");this916.width = width912;this916.height = height913;this916.mode = mode914;this916.pen = pen_or_color915;return null;};Rectangle.prototype.render = function(ctx917, x918, y919) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var this920 = this;ctx917.save();ctx917.translate(x918,y919);ctx917.beginPath();var width921 = this920.width;var height922 = this920.height;var start_x923 = M0.__(width921/2);var start_y924 = M0.__(height922/2);ctx917.rect(start_x923,start_y924,width921,height922);var or_part925 = M0.equal_p(this920.mode,$rjs_core.PrimitiveSymbol.make("outline"));if (or_part925!==false) {var if_res592 = or_part925;} else {var if_res592 = M0.equal_p(this920.mode,$rjs_core.UString.make("outline"));}if (if_res592!==false) {ctx917.strokeStyle = M3.js_string(___gt_web_color(this920.pen));var if_res595 = ctx917.stroke();} else {var or_part926 = M0.equal_p(this920.mode,$rjs_core.PrimitiveSymbol.make("solid"));if (or_part926!==false) {var if_res593 = or_part926;} else {var if_res593 = M0.equal_p(this920.mode,$rjs_core.UString.make("solid"));}if (if_res593!==false) {ctx917.fillStyle = M3.js_string(___gt_web_color(this920.pen));var if_res594 = ctx917.fill();} else {var if_res594 = M0.rvoid();}var if_res595 = if_res594;}if_res595;ctx917.closePath();return ctx917.restore();};var Circle = function(radius927, mode928, pen_or_color929) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var this930 = this;var diameter931 = radius927*2;this930.type = $rjs_core.UString.make("circle");this930.radius = radius927;this930.width = diameter931;this930.height = diameter931;this930.mode = mode928;this930.pen = pen_or_color929;return null;};Circle.prototype.render = function(ctx932, x933, y934) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var this935 = this;var radius936 = this935.radius;ctx932.save();ctx932.translate(x933,y934);ctx932.beginPath();ctx932.ellipse(0,0,radius936,radius936,0,0,M6.Math.PI*2);var or_part937 = M0.equal_p(this935.mode,$rjs_core.PrimitiveSymbol.make("outline"));if (or_part937!==false) {var if_res596 = or_part937;} else {var if_res596 = M0.equal_p(this935.mode,$rjs_core.UString.make("outline"));}if (if_res596!==false) {ctx932.strokeStyle = M3.js_string(___gt_web_color(this935.pen));var if_res599 = ctx932.stroke();} else {var or_part938 = M0.equal_p(this935.mode,$rjs_core.PrimitiveSymbol.make("solid"));if (or_part938!==false) {var if_res597 = or_part938;} else {var if_res597 = M0.equal_p(this935.mode,$rjs_core.UString.make("solid"));}if (if_res597!==false) {ctx932.fillStyle = M3.js_string(___gt_web_color(this935.pen));var if_res598 = ctx932.fill();} else {var if_res598 = M0.rvoid();}var if_res599 = if_res598;}if_res599;ctx932.closePath();return ctx932.restore();};var Polygon = function(vertices939, mode940, pen_or_color941) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var this942 = this;var xs943 = M2.map(posn_x,vertices939);var ys944 = M2.map(posn_y,vertices939);var width945 = M0.apply(M0.max,xs943)-M0.apply(M0.min,xs943);var height946 = M0.apply(M0.max,ys944)-M0.apply(M0.min,xs943);this942.type = $rjs_core.UString.make("polygon");this942.vertices = vertices939;this942.width = width945;this942.height = height946;this942.mode = mode940;this942.pen = pen_or_color941;return null;};Polygon.prototype.render = function(ctx947, x948, y949) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var this950 = this;var first_point951 = M0.car(this950.vertices);var rest_points952 = M0.cdr(this950.vertices);var radius953 = this950.radius;ctx947.save();ctx947.translate(x948,y949);ctx947.beginPath();ctx947.moveTo(posn_x(first_point951),posn_y(first_point951));var loop954 = function(points955) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.null_p(points955)!==false) {var if_res600 = M0.rvoid();} else {var pt956 = M0.car(points955);ctx947.lineTo(posn_x(pt956),posn_y(pt956));var if_res600 = loop954(M0.cdr(points955));}return if_res600;};loop954(rest_points952);var or_part957 = M0.equal_p(this950.mode,$rjs_core.PrimitiveSymbol.make("outline"));if (or_part957!==false) {var if_res601 = or_part957;} else {var if_res601 = M0.equal_p(this950.mode,$rjs_core.UString.make("outline"));}if (if_res601!==false) {ctx947.strokeStyle = M3.js_string(___gt_web_color(this950.pen));var if_res604 = ctx947.stroke();} else {var or_part958 = M0.equal_p(this950.mode,$rjs_core.PrimitiveSymbol.make("solid"));if (or_part958!==false) {var if_res602 = or_part958;} else {var if_res602 = M0.equal_p(this950.mode,$rjs_core.UString.make("solid"));}if (if_res602!==false) {ctx947.fillStyle = M3.js_string(___gt_web_color(this950.pen));var if_res603 = ctx947.fill();} else {var if_res603 = M0.rvoid();}var if_res604 = if_res603;}if_res604;ctx947.closePath();return ctx947.restore();};var empty_scene959 = function(width2960, height3961, color1962) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var width963 = width2960;var height964 = height3961;if (false!==false) {var if_res605 = $rjs_core.UString.make("white");} else {var if_res605 = color1962;}var color965 = if_res605;return overlay(rectangle(width963,height964,$rjs_core.UString.make("solid"),color965),rectangle(width963,height964,$rjs_core.UString.make("outline"),$rjs_core.UString.make("black")));};var cl606 = function(width966, height967) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return empty_scene959(width966,height967,$rjs_core.UString.make("white"));};var cl607 = function(width968, height969, color1970) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}return empty_scene959(width968,height969,color1970);};var empty_scene = $rjs_core.attachProcedureArity(function() {var fixed_lam608 = {'2':cl606,'3':cl607}[arguments.length];if (fixed_lam608!==undefined) {return fixed_lam608.apply(null,arguments);} else {return M0.error($rjs_core.UString.make("case-lambda: invalid case"));}},[2,3]);var text = function(txt971, size972, color973) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}return new Text(txt971,size972,color973,$rjs_core.UString.make(""),$rjs_core.UString.make("serif"),$rjs_core.UString.make("normal"),$rjs_core.UString.make("normal"),false);};var text_by_font = function(txt974, size975, color976, face977, family978, style979, weight980, underline_p981) {if (arguments.length!==8) {throw $rjs_core.racketContractError("arity mismatch");} else {}var or_part982 = face977;if (or_part982!==false) {var if_res612 = or_part982;} else {var if_res612 = $rjs_core.UString.make("");}if (M0.symbol_p(family978)!==false) {var if_res611 = M0.symbol__gt_string(family978);} else {var if_res611 = family978;}if (M0.symbol_p(style979)!==false) {var if_res610 = M0.symbol__gt_string(style979);} else {var if_res610 = style979;}if (M0.symbol_p(weight980)!==false) {var if_res609 = M0.symbol__gt_string(weight980);} else {var if_res609 = weight980;}return new Text(txt974,size975,color976,if_res612,if_res611,if_res610,if_res609,underline_p981);};var line = function(x983, y984, pen_or_color985) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}return new Line(x983,y984,pen_or_color985);};var rectangle = function(w986, h987, m988, p989) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}return new Rectangle(w986,h987,m988,p989);};var square = function(s990, m991, p992) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}return new Rectangle(s990,s990,m991,p992);};var circle = function(r993, m994, p995) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}return new Circle(r993,m994,p995);};var triangle = function(side996, mode997, color998) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var height999 = side996*(M0.sqrt(3)/2);return new Polygon(M0.list(make_posn(M0.__(side996/2),height999/2),make_posn(0,M0.__(height999/2)),make_posn(side996/2,height999/2)),mode997,color998);};var Overlay = function(x_place1000, y_place1001, ima1002, imb1003) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}var this1004 = this;var ima_cx1005 = ima1002.width/2;var ima_cy1006 = ima1002.height/2;var imb_cx1007 = imb1003.width/2;var imb_cy1008 = imb1003.height/2;var tmp1010 = x_place1000;if (M0.equal_p(tmp1010,$rjs_core.UString.make("beside"))!==false) {var if_res615 = ima1002.width+imb1003.width;} else {if (M0.number_p(x_place1000)!==false) {if (M0.positive_p(x_place1000)!==false) {var if_res613 = M0.max(ima1002.width,imb1003.width+x_place1000);} else {var if_res613 = M0.max(imb1003.width,ima1002.width-x_place1000);}var if_res614 = if_res613;} else {var if_res614 = M0.max(ima1002.width,imb1003.width);}var if_res615 = if_res614;}var width1009 = if_res615;var tmp1012 = y_place1001;if (M0.equal_p(tmp1012,$rjs_core.UString.make("above"))!==false) {var if_res618 = ima1002.height+imb1003.height;} else {if (M0.number_p(y_place1001)!==false) {if (M0.positive_p(y_place1001)!==false) {var if_res616 = M0.max(ima1002.height,imb1003.height+y_place1001);} else {var if_res616 = M0.max(imb1003.height,ima1002.height-y_place1001);}var if_res617 = if_res616;} else {var if_res617 = M0.max(ima1002.height,imb1003.height);}var if_res618 = if_res617;}var height1011 = if_res618;var δ_edge_x1013 = width1009/2;var δ_edge_y1014 = height1011/2;var tmp1017 = x_place1000;if (M0.equal_p(tmp1017,$rjs_core.UString.make("left"))!==false) {var if_res625 = M0.values(ima_cx1005-δ_edge_x1013,imb_cx1007-δ_edge_x1013);} else {if (M0.equal_p(tmp1017,$rjs_core.UString.make("right"))!==false) {var if_res624 = M0.values(δ_edge_x1013-ima_cx1005,δ_edge_x1013-imb_cx1007);} else {if (M0.equal_p(tmp1017,$rjs_core.UString.make("beside"))!==false) {var if_res623 = M0.values(ima_cx1005-δ_edge_x1013,δ_edge_x1013-imb_cx1007);} else {if (M0.equal_p(tmp1017,$rjs_core.UString.make("middle"))!==false) {var if_res619 = true;} else {var if_res619 = M0.equal_p(tmp1017,$rjs_core.UString.make("center"));}if (if_res619!==false) {var if_res622 = M0.values(0,0);} else {if (M0.number_p(x_place1000)!==false) {var local_width1018 = M0.max(ima1002.width,imb1003.width);var local_acx1019 = ima_cx1005-(local_width1018/2);var local_bcx1020 = imb_cx1007-(local_width1018/2);var acx_bcx1021 = δ_edge_x1013-(local_width1018/2);if (M0.positive_p(x_place1000)!==false) {var if_res620 = M0.values(local_acx1019-acx_bcx1021,x_place1000+(local_bcx1020-acx_bcx1021));} else {var if_res620 = M0.values(local_acx1019-x_place1000-acx_bcx1021,local_bcx1020-acx_bcx1021);}var if_res621 = if_res620;} else {var if_res621 = M0.error($rjs_core.UString.make("invalid x-place align"));}var if_res622 = if_res621;}var if_res623 = if_res622;}var if_res624 = if_res623;}var if_res625 = if_res624;}var let_result626 = if_res625;var δ_a_x1015 = let_result626.getAt(0);var δ_b_x1016 = let_result626.getAt(1);var tmp1024 = y_place1001;if (M0.equal_p(tmp1024,$rjs_core.UString.make("top"))!==false) {var if_res633 = M0.values(ima_cy1006-δ_edge_y1014,imb_cy1008-δ_edge_y1014);} else {if (M0.equal_p(tmp1024,$rjs_core.UString.make("bottom"))!==false) {var if_res632 = M0.values(δ_edge_y1014-ima_cy1006,δ_edge_y1014-imb_cy1008);} else {if (M0.equal_p(tmp1024,$rjs_core.UString.make("above"))!==false) {var if_res631 = M0.values(ima_cy1006-δ_edge_y1014,δ_edge_y1014-imb_cy1008);} else {if (M0.equal_p(tmp1024,$rjs_core.UString.make("middle"))!==false) {var if_res627 = true;} else {var if_res627 = M0.equal_p(tmp1024,$rjs_core.UString.make("center"));}if (if_res627!==false) {var if_res630 = M0.values(0,0);} else {if (M0.number_p(y_place1001)!==false) {var local_height1025 = M0.max(ima1002.height,imb1003.height);var local_acy1026 = ima_cy1006-(local_height1025/2);var local_bcy1027 = imb_cy1008-(local_height1025/2);var acy_bcy1028 = δ_edge_y1014-(local_height1025/2);if (M0.positive_p(y_place1001)!==false) {var if_res628 = M0.values(local_acy1026-acy_bcy1028,y_place1001+(local_bcy1027-acy_bcy1028));} else {var if_res628 = M0.values(local_acy1026-y_place1001-acy_bcy1028,local_bcy1027-acy_bcy1028);}var if_res629 = if_res628;} else {var if_res629 = M0.error($rjs_core.UString.make("invalid y-place align"));}var if_res630 = if_res629;}var if_res631 = if_res630;}var if_res632 = if_res631;}var if_res633 = if_res632;}var let_result634 = if_res633;var δ_a_y1022 = let_result634.getAt(0);var δ_b_y1023 = let_result634.getAt(1);this1004.type = $rjs_core.UString.make("overlay");this1004.ima = ima1002;this1004.imb = imb1003;this1004.width = width1009;this1004.height = height1011;this1004.aDx = δ_a_x1015;this1004.aDy = δ_a_y1022;this1004.bDx = δ_b_x1016;this1004.bDy = δ_b_y1023;return null;};Overlay.prototype.render = function(ctx1029, x1030, y1031) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var this1032 = this;var ima1033 = this1032.ima;var imb1034 = this1032.imb;ctx1029.save();ctx1029.translate(x1030,y1031);imb1034.render(ctx1029,this1032.bDx,this1032.bDy);ima1033.render(ctx1029,this1032.aDx,this1032.aDy);return ctx1029.restore();};var Container = function(childs1035, posns1036, width1037, height1038) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}var this1039 = this;this1039.type = $rjs_core.UString.make("container");this1039.childs = childs1035;this1039.posns = posns1036;this1039.width = width1037;this1039.height = height1038;return null;};Container.prototype.render = function(ctx1040, x1041, y1042) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var this1043 = this;var width1044 = this1043.width;var height1045 = this1043.height;ctx1040.save();ctx1040.translate(x1041-(width1044/2),y1042-(height1045/2));ctx1040.beginPath();ctx1040.rect(0,0,M0.sub1(width1044),M0.sub1(height1045));ctx1040.clip();var loop1046 = function(childs1047, posns1048) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.null_p(childs1047)!==false) {var if_res635 = M0.rvoid();} else {var child1049 = M0.car(childs1047);var posn1050 = M0.car(posns1048);child1049.render(ctx1040,posn_x(posn1050),posn_y(posn1050));var if_res635 = loop1046(M0.cdr(childs1047),M0.cdr(posns1048));}return if_res635;};loop1046(this1043.childs,this1043.posns);return ctx1040.restore();};var Bitmap = function(data1051) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var this1052 = this;var image1053 = new Image;image1053.crossOrigin = "anonymous";image1053.src = M3.js_string(data1051);this1052.image = image1053;this1052.width = image1053.width;this1052.height = image1053.height;return null;};Bitmap.prototype.render = function(ctx1054, x1055, y1056) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var this1057 = this;var image1058 = this1057.image;ctx1054.save();ctx1054.translate(x1055,y1056);ctx1054.drawImage(image1058,M0.__(image1058.width/2),M0.__(image1058.height/2));return ctx1054.restore();};var Freeze = function(img1059) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var this1060 = this;var canvas1061 = M6.document.createElement("canvas");var ctx1062 = canvas1061.getContext("2d");var width1063 = img1059.width;var height1064 = img1059.height;canvas1061.width = width1063;canvas1061.height = height1064;ctx1062.save();ctx1062.translate(width1063/2,height1064/2);img1059.render(ctx1062,0,0);ctx1062.restore();this1060.width = width1063;this1060.height = height1064;this1060.canvas = canvas1061;return null;};Freeze.prototype.render = function(ctx1065, x1066, y1067) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var this1068 = this;var width1069 = this1068.width;var height1070 = this1068.height;ctx1065.save();ctx1065.translate(x1066,y1067);ctx1065.drawImage(this1068.canvas,M0.__(width1069/2),M0.__(height1070/2));return ctx1065.restore();};var Rotate = function(image1071, angle1072) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var this1073 = this;var width1074 = image1071.width;var height1075 = image1071.height;var θ1076 = (M6.Math.PI*angle1072)/180.0;var sin_θ1077 = M0.sin(θ1076);var cos_θ1078 = M0.cos(θ1076);var x11079 = cos_θ1078*width1074;var y11080 = sin_θ1077*width1074;var x21081 = M0.__(sin_θ1077)*height1075;var y21082 = cos_θ1078*height1075;var x31083 = x11079+x21081;var y31084 = y11080+y21082;var min_x1085 = M0.min(0,x11079,x21081,x31083);var max_x1086 = M0.max(0,x11079,x21081,x31083);var min_y1087 = M0.min(0,y11080,y21082,y31084);var max_y1088 = M0.max(0,y11080,y21082,y31084);var rotated_width1089 = M0.floor(max_x1086-min_x1085);var rotated_height1090 = M0.floor(max_y1088-min_y1087);this1073.image = image1071;this1073.width = rotated_width1089;this1073.height = rotated_height1090;this1073.degrees = angle1072;this1073.radians = θ1076;return null;};Rotate.prototype.render = function(ctx1091, x1092, y1093) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var this1094 = this;ctx1091.save();ctx1091.translate(x1092,y1093);ctx1091.rotate(this1094.radians);this1094.image.render(ctx1091,0,0);return ctx1091.restore();};var Scale = function(image1095, x_factor1096, y_factor1097) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var this1098 = this;this1098.image = image1095;this1098.x_factor = x_factor1096;this1098.y_factor = y_factor1097;this1098.width = M0.abs(M0.floor(image1095.width*x_factor1096));this1098.height = M0.abs(M0.floor(image1095.height*y_factor1097));return null;};Scale.prototype.render = function(ctx1099, x1100, y1101) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var this1102 = this;ctx1099.save();ctx1099.translate(x1100,y1101);ctx1099.scale(this1102.x_factor,this1102.y_factor);this1102.image.render(ctx1099,0,0);return ctx1099.restore();};var container = function(childs1103, posns1104, width1105, height1106) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}return new Container(childs1103,posns1104,width1105,height1106);};var place_image = function(child1107, cx1108, cy1109, base1110) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}var width1111 = base1110.width;var height1112 = base1110.height;return container(M0.list(base1110,child1107),M0.list(make_posn(width1111/2,height1112/2),make_posn(cx1108,cy1109)),width1111,height1112);};var place_images = function(images1113, posns1114, scene1115) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var width1116 = scene1115.width;var height1117 = scene1115.height;return container(M0.cons(scene1115,images1113),M0.cons(make_posn(width1116/2,height1117/2),posns1114),width1116,height1117);};var __align_image_pos = function(image1118, pos1119, x_place1120, y_place1121) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}var x1122 = posn_x(pos1119);var y1123 = posn_y(pos1119);var tmp1125 = x_place1120;if (M0.equal_p(tmp1125,$rjs_core.UString.make("left"))!==false) {var if_res639 = (image1118.width/2)+x1122;} else {if (M0.equal_p(tmp1125,$rjs_core.UString.make("right"))!==false) {var if_res638 = x1122-(image1118.width/2);} else {if (M0.equal_p(tmp1125,$rjs_core.UString.make("center"))!==false) {var if_res636 = true;} else {var if_res636 = M0.equal_p(tmp1125,$rjs_core.UString.make("middle"));}if (if_res636!==false) {var if_res637 = x1122;} else {var if_res637 = M0.rvoid();}var if_res638 = if_res637;}var if_res639 = if_res638;}var new_x1124 = if_res639;var tmp1127 = y_place1121;if (M0.equal_p(tmp1127,$rjs_core.UString.make("top"))!==false) {var if_res643 = (image1118.height/2)+y1123;} else {if (M0.equal_p(tmp1127,$rjs_core.UString.make("bottom"))!==false) {var if_res642 = y1123-(image1118.height/2);} else {if (M0.equal_p(tmp1127,$rjs_core.UString.make("center"))!==false) {var if_res640 = true;} else {var if_res640 = M0.equal_p(tmp1127,$rjs_core.UString.make("middle"));}if (if_res640!==false) {var if_res641 = y1123;} else {var if_res641 = M0.rvoid();}var if_res642 = if_res641;}var if_res643 = if_res642;}var new_y1126 = if_res643;return make_posn(new_x1124,new_y1126);};var place_image_by_align = function(image1128, x1129, y1130, x_place1131, y_place1132, scene1133) {if (arguments.length!==6) {throw $rjs_core.racketContractError("arity mismatch");} else {}var new_pos1134 = __align_image_pos(image1128,make_posn(x1129,y1130),x_place1131,y_place1132);return place_image(image1128,posn_x(new_pos1134),posn_y(new_pos1134),scene1133);};var place_images_by_align = function(images1135, posns1136, x_place1137, y_place1138, scene1139) {if (arguments.length!==5) {throw $rjs_core.racketContractError("arity mismatch");} else {}var new_posns1140 = M2.map(function(i1141, p1142) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return __align_image_pos(i1141,p1142,x_place1137,y_place1138);},images1135,posns1136);return place_images(images1135,new_posns1140,scene1139);};var __single_overlay = function(x_place1143, y_place1144, ima1145, imb1146) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}return new Overlay(x_place1143,y_place1144,ima1145,imb1146);};var __single_underlay = function(x_place1147, y_place1148, ima1149, imb1150) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}return new Overlay(x_place1147,y_place1148,imb1150,ima1149);};var overlay_by_align = $rjs_core.attachProcedureArity(function(x_place1151, y_place1152, ima1153, imb1154, ...imn1155644) {if (arguments.length<4) {throw $rjs_core.racketContractError("arity mismatch");} else {}var imn1155 = $rjs_core.Pair.listFromArray(imn1155644);return M5.foldl(function(img1156, acc1157) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return __single_overlay(x_place1151,y_place1152,acc1157,img1156);},empty_image,M0.cons(ima1153,M0.cons(imb1154,imn1155)));});var overlay = $rjs_core.attachProcedureArity(function(ima1158, imb1159, ...imn1160645) {if (arguments.length<2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var imn1160 = $rjs_core.Pair.listFromArray(imn1160645);return M5.foldl(function(img1161, acc1162) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return __single_overlay($rjs_core.UString.make("middle"),$rjs_core.UString.make("middle"),acc1162,img1161);},empty_image,M0.cons(ima1158,M0.cons(imb1159,imn1160)));});var overlay_by_xy = function(ima1163, x1164, y1165, imb1166) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}return new Overlay(x1164,y1165,ima1163,imb1166);};var underlay = $rjs_core.attachProcedureArity(function(ima1167, imb1168, ...imn1169646) {if (arguments.length<2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var imn1169 = $rjs_core.Pair.listFromArray(imn1169646);return M5.foldl(function(img1170, acc1171) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return __single_underlay($rjs_core.UString.make("middle"),$rjs_core.UString.make("middle"),acc1171,img1170);},empty_image,M0.cons(ima1167,M0.cons(imb1168,imn1169)));});var underlay_by_align = $rjs_core.attachProcedureArity(function(x_place1172, y_place1173, ima1174, imb1175, ...imn1176647) {if (arguments.length<4) {throw $rjs_core.racketContractError("arity mismatch");} else {}var imn1176 = $rjs_core.Pair.listFromArray(imn1176647);return M5.foldl(function(img1177, acc1178) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return __single_underlay(x_place1172,y_place1173,acc1178,img1177);},empty_image,M0.cons(ima1174,M0.cons(imb1175,imn1176)));});var underlay_by_xy = function(ima1179, x1180, y1181, imb1182) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}return new Overlay(M0.__(x1180),M0.__(y1181),imb1182,ima1179);};var above_by_align = $rjs_core.attachProcedureArity(function(x_place1183, i11184, i21185, ...is1186648) {if (arguments.length<3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var is1186 = $rjs_core.Pair.listFromArray(is1186648);return M5.foldl(function(img1187, acc1188) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return __single_overlay(x_place1183,$rjs_core.UString.make("above"),acc1188,img1187);},empty_image,M0.cons(i11184,M0.cons(i21185,is1186)));});var above = $rjs_core.attachProcedureArity(function(i11189, i21190, ...is1191649) {if (arguments.length<2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var is1191 = $rjs_core.Pair.listFromArray(is1191649);return M5.foldl(function(img1192, acc1193) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return __single_overlay($rjs_core.UString.make("middle"),$rjs_core.UString.make("above"),acc1193,img1192);},empty_image,M0.cons(i11189,M0.cons(i21190,is1191)));});var beside_by_align = $rjs_core.attachProcedureArity(function(y_place1194, i11195, i21196, ...is1197650) {if (arguments.length<3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var is1197 = $rjs_core.Pair.listFromArray(is1197650);return M5.foldl(function(img1198, acc1199) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return __single_overlay($rjs_core.UString.make("beside"),y_place1194,acc1199,img1198);},empty_image,M0.cons(i11195,M0.cons(i21196,is1197)));});var beside = $rjs_core.attachProcedureArity(function(i11200, i21201, ...is1202651) {if (arguments.length<2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var is1202 = $rjs_core.Pair.listFromArray(is1202651);return M5.foldl(function(img1203, acc1204) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return __single_overlay($rjs_core.UString.make("beside"),$rjs_core.UString.make("middle"),acc1204,img1203);},empty_image,M0.cons(i11200,M0.cons(i21201,is1202)));});var rotate = function(angle1205, image1206) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return new Rotate(image1206,M0.__(angle1205));};var scale = function(factor1207, image1208) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return new Scale(image1208,factor1207,factor1207);};var flip_horizontal = function(image1209) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return new Scale(image1209,-1,1);};var flip_vertical = function(image1210) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return new Scale(image1210,1,-1);};var bitmap_by_data = function(data1211) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return new Bitmap(data1211);};var bitmap_by_url = function(url1212) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return new Bitmap(url1212);};var frame = function(img1213) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return color_frame($rjs_core.UString.make("black"),img1213);};var color_frame = function(color1214, img1215) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return overlay(rectangle(image_width(img1215),image_height(img1215),$rjs_core.PrimitiveSymbol.make("outline"),color1214),img1215);};var freeze = function(img1216) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return new Freeze(img1216);};var __rjs_quoted__ = {};__rjs_quoted__.empty_image = empty_image;__rjs_quoted__.posn_p = posn_p;__rjs_quoted__.make_posn = make_posn;__rjs_quoted__.posn_y = posn_y;__rjs_quoted__.posn_x = posn_x;__rjs_quoted__.___gt_web_color = ___gt_web_color;__rjs_quoted__.struct_posn = struct_posn;export { __rjs_quoted__,posn_x,posn_y,posn_p,make_posn,struct_posn,print_image,freeze,bitmap_by_url,bitmap_by_data,flip_horizontal,flip_vertical,scale,rotate,beside,beside_by_align,above,above_by_align,underlay_by_xy,underlay,overlay,overlay_by_xy,overlay_by_align,place_images_by_align,place_image_by_align,place_images,place_image,color_frame,frame,triangle,text_by_font,text,circle,square,rectangle,line,image_width,image_height,empty_scene,empty_image };